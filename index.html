<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Waker Egg Catcher</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body, html { width: 100%; height: 100%; overflow: hidden; background: #cdeaff; }
    canvas { display: block; margin: 0 auto; background: #87ceeb; }
    #gameCanvas { touch-action: none; }
  </style>
</head>
<body>
<canvas id="gameCanvas" width="480" height="640"></canvas>
<script>
  const canvas = document.getElementById('gameCanvas');
  const ctx = canvas.getContext('2d');

  const wakerImg = new Image();
  const duckImg = new Image();
  const eggImg = new Image();
  wakerImg.src = 'waker.png';
  duckImg.src = 'duck.png';
  eggImg.src = 'egg.png';

  const waker = {
    x: canvas.width / 2 - 40,
    y: canvas.height - 80,
    width: 80,
    height: 80,
    speed: 6
  };

  const ducks = [
    { x: 20, y: 20 },
    { x: 120, y: 20 },
    { x: 340, y: 20 },
    { x: 420, y: 20 }
  ];

  let eggs = [];
  let eggDropInterval = 2000;
  let lastEggDrop = 0;
  let speedMultiplier = 1;
  let score = 0;

  function dropEgg() {
    const duck = ducks[Math.floor(Math.random() * ducks.length)];
    eggs.push({ x: duck.x + 10, y: duck.y + 30, speed: 2 + speedMultiplier });
  }

  function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ducks.forEach(duck => ctx.drawImage(duckImg, duck.x, duck.y, 40, 40));
    ctx.drawImage(wakerImg, waker.x, waker.y, waker.width, waker.height);

    eggs.forEach(egg => ctx.drawImage(eggImg, egg.x, egg.y, 20, 30));

    ctx.fillStyle = 'black';
    ctx.font = '20px Arial';
    ctx.fillText('Score: ' + score, 10, 30);
  }

  function update(deltaTime) {
    if (Date.now() - lastEggDrop > eggDropInterval) {
      dropEgg();
      lastEggDrop = Date.now();
      speedMultiplier += 0.1;
      eggDropInterval = Math.max(500, eggDropInterval - 20);
    }

    eggs.forEach((egg, i) => {
      egg.y += egg.speed;

      if (
        egg.y + 30 > waker.y &&
        egg.y < waker.y + waker.height &&
        egg.x + 20 > waker.x &&
        egg.x < waker.x + waker.width
      ) {
        eggs.splice(i, 1);
        score++;
      }
      if (egg.y > canvas.height) {
        eggs.splice(i, 1);
      }
    });
  }

  function gameLoop(timestamp) {
    draw();
    update();
    requestAnimationFrame(gameLoop);
  }

  document.addEventListener('keydown', e => {
    if (e.key === 'ArrowLeft') waker.x -= waker.speed;
    if (e.key === 'ArrowRight') waker.x += waker.speed;
    if (e.key === 'ArrowUp') waker.y -= waker.speed;
    if (e.key === 'ArrowDown') waker.y += waker.speed;
  });

  canvas.addEventListener('touchstart', e => {
    const touch = e.touches[0];
    moveTo(touch.clientX, touch.clientY);
  });
  canvas.addEventListener('touchmove', e => {
    const touch = e.touches[0];
    moveTo(touch.clientX, touch.clientY);
  });

  function moveTo(x, y) {
    const rect = canvas.getBoundingClientRect();
    waker.x = x - rect.left - waker.width / 2;
    waker.y = y - rect.top - waker.height / 2;
  }

  wakerImg.onload = () => requestAnimationFrame(gameLoop);
</script>
</body>
</html>
